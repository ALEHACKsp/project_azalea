# SConstruct file for klib-memory-test.

import os
import defaults

# Setup Environment.
env = Environment()
defaults.setup_default_env(env)

# List of required components.
dependencies_in = ['#test/test_core/SConscript',
                   '#test/klib/memory/SConscript',
                   '#klib/memory/SConscript',
                   '#klib/lists/SConscript',
                   '#klib/c_helpers/SConscript',
                   '#test/dummy_libs/core_mem/SConscript',
                   '#test/dummy_libs/panic/SConscript',
                   #'#test/dummy_libs/tracing/SConscript',
                  ]
                   
# Build components.
dependencies_out = [ ]

for dep in dependencies_in:
  out_dir = os.path.join('output', dep.strip('#'))
  dep_out = SConscript(dep, 'env', variant_dir=out_dir, duplicate=0)
  dependencies_out.append(dep_out)

env.Program("output/klib-memory-test", dependencies_out)