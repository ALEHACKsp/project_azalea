# SConstruct file for klib-lists-test.

import os
import defaults

# Setup Environment.
env = Environment()
defaults.setup_default_env(env)

# List of required components.
dependencies_in = ['#test/test_core/SConscript',
                   '#test/klib/synch/SConscript',
                   '#klib/synch/SConscript',
                   '#test/dummy_libs/panic/SConscript',
                   #'#test/dummy_libs/tracing/SConscript',
                   '#test/dummy_libs/processor/SConscript',
                   '#klib/lists/Sconscript',
                  ]
                   
# Build components.
dependencies_out = [ ]

for dep in dependencies_in:
  out_dir = os.path.join('output', dep.strip('#'))
  dep_out = SConscript(dep, 'env', variant_dir=out_dir, duplicate=0)
  dependencies_out.append(dep_out)
  
env['LIBS'] = [ "pthread", ]

env.Program("output/klib-synch-test", dependencies_out)